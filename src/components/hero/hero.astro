---
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";
import Markdown from "../utility/markdown.astro";

interface Props {
  heading: {
    heading_text: string;
    heading_gradient_color: string;
  };
  image: {
    image_path: string;
    alt_text: string;
  };
  background_color: string;
}

const block = Astro.props;
const images = import.meta.glob<{ default: ImageMetadata }>(
  "/src/assets/**/*.{jpeg,jpg,png,gif}",
  { eager: true }
);
const imageSrc =
  images[block.image.image_path]?.default ?? block.image.image_path;
---

<section style={`background-color: ${block.background_color};`}>
  <div class="hero-container">
    <div class="content">
      <h1 class="heading">{block.heading.heading_text}</h1>
      <Image
        alt={block.image.alt_text}
        widths={[320, 500, 640]}
        sizes={`(max-width: 640px) 320px, (max-width: 960px) 500px, (max-width: 1280px) 640px`}
        src={imageSrc}
      />
    </div>
  </div>
</section>
<style>
  .hero-container {
    max-width: var(--pageContainer);
    margin-inline: auto;
    padding-inline: var(--pagePadding);
    padding-block: 24px;
  }
</style>
